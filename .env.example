# RT-Cache Centralized Configuration
# Copy this file to .env and update with your values
# All variables map to the centralized config system in config/rt_cache_config.py

# ==============================================================================
# Database Configuration
# ==============================================================================

# MongoDB Settings
MONGO_URL=mongodb://localhost:27017/
MONGO_DB_NAME=OpenVLACollection
MONGO_USERNAME=
MONGO_PASSWORD=
MONGO_AUTH_SOURCE=admin

# Qdrant Vector Database
QDRANT_HOST=localhost
QDRANT_PORT=6333
QDRANT_GRPC_PORT=6334
QDRANT_API_KEY=
QDRANT_HTTPS=false

# ==============================================================================
# Server Configuration
# ==============================================================================

# Embedding Server (Port 9020)
EMBEDDING_SERVER_HOST=0.0.0.0
EMBEDDING_SERVER_PORT=9020
EMBEDDING_SERVER_WORKERS=1
EMBEDDING_SERVER_URL=http://127.0.0.1:9020/predict

# Retrieval Server (Port 5001)
RETRIEVAL_SERVER_HOST=0.0.0.0
RETRIEVAL_SERVER_PORT=5001
RETRIEVAL_SERVER_DEBUG=false

# Data Collection Server (Port 5002)
DATA_COLLECTION_HOST=0.0.0.0
DATA_COLLECTION_PORT=5002

# ==============================================================================
# Data Paths - CUSTOMIZE THESE FOR YOUR SETUP
# ==============================================================================

# Main data directories
DATA_ROOT=./data/robot-datasets
IMAGE_STORAGE_PATH=./data/images
PROCESSED_DATA_PATH=./data/processed
CACHE_DIR=./cache

# RT-Cache specific paths
RT_CACHE_RAW_DIR=./data/rt-cache/raw

# Logging
LOG_DIR=./logs
LOG_LEVEL=INFO

# Model paths (optional, will download if not specified)
OPENVLA_MODEL_PATH=
CLIP_MODEL_PATH=
OPENVLA_CHECKPOINT_DIR=./checkpoints/openvla-7b-franka-finetuned

# ==============================================================================
# Model and Computation Configuration
# ==============================================================================

# Device settings
DEVICE=cuda:0
CUDA_VISIBLE_DEVICES=0

# Model parameters
MODEL_BATCH_SIZE=32
MODEL_DTYPE=bfloat16
USE_FLASH_ATTENTION=true

# Performance settings
MAX_MEMORY_GB=32
GPU_MEMORY_FRACTION=0.9
CLEAR_CACHE_INTERVAL=100

# Parallel processing
NUM_WORKERS=4
PREFETCH_FACTOR=2

# ==============================================================================
# Dataset and Experiment Configuration
# ==============================================================================

# Active dataset
DATASET_NAME=test
DATASET_SPLIT=train

# Data collection mode
MODE=debug
DEBUG_EPISODE=2

# Processing parameters
TARGET_FREQUENCY=10.0
BATCH_INSERT_SIZE=20
MAX_EPISODES=100

# Episode filtering
MIN_EPISODE_LENGTH=5
MAX_EPISODE_LENGTH=1000

# Action generation - CUSTOMIZE FOR YOUR ROBOT
ACTION_GENERATOR_TYPE=default
ACTION_CONFIG_PATH=./config/action_patterns.yaml

# ==============================================================================
# Retrieval System Configuration
# ==============================================================================

# Search parameters
NUM_CANDIDATES=5
SEARCH_LIMIT=100
SCORE_THRESHOLD=0.7
CONSECUTIVE_STEPS=2

# Embedding dimensions
OPENVLA_EMBEDDING_DIM=2176
CLIP_EMBEDDING_DIM=512

# Fusion weights for multi-modal retrieval
OPENVLA_WEIGHT=0.6
CLIP_WEIGHT=0.4

# Distance metric
DISTANCE_METRIC=Cosine

# ==============================================================================
# Security Configuration (Optional)
# ==============================================================================

# API Security
API_KEY=
JWT_SECRET_KEY=your-secret-key-here
ENABLE_CORS=true
ALLOWED_ORIGINS=*

# Rate limiting
ENABLE_RATE_LIMITING=true
RATE_LIMIT=100/hour

# Timeouts
REQUEST_TIMEOUT=60
DATABASE_TIMEOUT=30

# ==============================================================================
# Monitoring Configuration (Optional)
# ==============================================================================

# Metrics
ENABLE_METRICS=true
METRICS_PORT=9090

# Prometheus
PROMETHEUS_ENABLED=false
PROMETHEUS_PUSHGATEWAY_URL=http://localhost:9091

# ==============================================================================
# Development Settings
# ==============================================================================

# Debug mode
DEBUG=false
HOT_RELOAD=false

# Testing
TEST_MODE=false
TEST_DATABASE=test_db

# Mock services for development
MOCK_EMBEDDING=false
MOCK_DATABASE=false

# ==============================================================================
# Quick Start Configurations
# ==============================================================================

# For different use cases, uncomment the relevant section:

# Development Setup (local testing):
# DEVICE=cpu
# DEBUG=true
# TEST_MODE=true

# Production Setup (server deployment):
# EMBEDDING_SERVER_HOST=0.0.0.0
# RETRIEVAL_SERVER_HOST=0.0.0.0
# ENABLE_METRICS=true

# Distributed Setup (multiple machines):
# EMBEDDING_SERVER_URL=http://your-embedding-server:9020/predict
# MONGO_URL=mongodb://your-mongo-server:27017/
# QDRANT_HOST=your-qdrant-server